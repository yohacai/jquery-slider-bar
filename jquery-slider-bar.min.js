(function(c){var a=function(f){this.widget={"offsetWidth":0,"offsetHeight":0,thumb:{"offsetHeight":0,"offsetWidth":0,}};this.defaults={width:"100%",height:"100%",color:"#ddd",track:{start:0.5,preColor:"#3FB8AF",postColor:"#ddd"},thumb:{"background":"#eee","border":"1px solid #aaa","box-shadow":"0px 0px 5px #aaa","border-radius":"100%","height":"120%","hover":{"box-shadow":"0px 0px 10px #454590"}}};this.options=c.extend({},this.defaults,f)};var d={getFilePath:function(h){var g="";$script=c("script");for(var f=0;f<$script.length;f++){var j=c($script[f]).attr("src");j=j?j.replace(/\\/,"/"):"undefined";var k=j.substring(j.lastIndexOf("/")+1,j.length);if(k==h){g=j.substring(0,j.lastIndexOf("/")+1)}}return g},fileQuote:function(h,f,g){$head=c("head");switch(f){case"script":$head.append("<script src="+g+h+"><\/script>");break;case"link":$head.append("<link rel='stylesheet' href="+g+h+" />");break;default:$head.append("<"+f+"></"+f+">");break}}};var b=function(k,j,h){var f=j+k[0].offsetWidth/2;var g=k.parent()[0].offsetWidth-f;var i=k.parent()[0].offsetWidth-k[0].offsetWidth/2;$preTrack=k.prev().prev();$postTrack=k.prev();$val=k.next();if(h==""||h==undefined){k.css("left",j+"px");$preTrack.css("width",f+"px");$postTrack.css("width",g+"px")}else{k.animate({"left":j+"px"},h);$preTrack.animate({"width":f+"px"},h);$postTrack.animate({"width":g+"px"},h)}k.parent().parent().attr("value",(j/i).toFixed(5));$val.html("");$val.html((j/i).toFixed(5));$val.html("")};a.prototype.create=function(f){var i=this;var h=function(j){preTrack_Width=i.options.track.start*100+"%";postTrack_Width=(1-i.options.track.start)*100+"%";j.css({"width":i.options.width,"height":i.options.height});j.children(".preTrack").css({"width":preTrack_Width,"background":i.options.track.preColor});j.children(".postTrack").css({"width":postTrack_Width,"background":i.options.track.postColor});j.children(".thumb").css(i.options.thumb);thumb_Height=j.parent()[0].offsetHeight*(parseInt(i.options.thumb.height.split("%")[0])/100);thumb_Left=j[0].offsetWidth*i.options.track.start-thumb_Height/2+"px";thumb_Top=(thumb_Height-j.parent()[0].offsetHeight)/2+"px";thumb_Width=thumb_Height+"px";j.children(".thumb").css({"width":thumb_Width,"left":thumb_Left,"top":"-"+thumb_Top})};var g=function(j){i.widget.offsetWidth=j[0].offsetWidth;i.widget.offsetHeight=j[0].offsetHeight;i.widget.thumb.offsetWidth=j.children(".thumb")[0].offsetWidth;i.widget.thumb.offsetHeight=j.children(".thumb")[0].offsetHeight};$barWraper=c("<div class='sliderBarWraper'></div>");$preTrack=c("<div class='preTrack'></div>");$postTrack=c("<div class='postTrack'></div>");$thumb=c("<div class='thumb'></div>");$val=c("<div class='sliderVal' style='display:none'></div>");$val.html(this.options.track.start);$barWraper.append($preTrack);$barWraper.append($postTrack);$barWraper.append($thumb);$barWraper.append($val);f.append($barWraper);h($barWraper);g($barWraper);return $barWraper};a.prototype.bindListener=function(g){var h=this;$thumb=g.children(".thumb");$preTrack=g.children(".preTrack");$postTrack=g.children(".postTrack");var f=function(m){var j=0;var k=0;var l=0;var i=function(){j=0;k=0};m.hover(function(){c(this).css(h.options.thumb.hover)},function(){c(this).css(h.options.thumb)});m.mousedown(function(n){j=1;k=n.clientX});m.mouseup(function(n){i()});c("html").mouseup(function(n){i()});c("html").mousemove(function(n){if(j==1){var o=parseInt(m.css("left").split("px")[0]);var p=m.parent()[0].offsetWidth-m[0].offsetWidth/2;var s=0;var r=m.parent().offset().left;if((h.widget.offsetWidth+r+h.widget.thumb.offsetWidth/2)>n.clientX&&n.clientX>r){if(o<=p&&o>=s){var q=n.clientX-k;if((o==p&&q<0)||(o==0&&q>0)||(o>0&&o<p)){moveDis=o+q;if(moveDis<=0){moveDis=0}if(moveDis>p){moveDis=p}b(m,moveDis);k=n.clientX}}}else{if((h.widget.offsetWidth+r)<n.clientX){b(m,p)}else{if(n.clientX<r){b(m,s)}}}}});$preTrack.click(function(o){var p=parseInt(m.css("left").split("px")[0]);var q=g.offset().left;var n=o.clientX-q-h.widget.thumb.offsetWidth/2;b(m,n,80)});$postTrack.click(function(o){var p=parseInt(m.css("left").split("px")[0]);var q=g.offset().left;var n=o.clientX-q-h.widget.thumb.offsetWidth/2;b(m,n,80)})};f($thumb)};var e=function(){d.fileQuote("style.css","link",d.getFilePath("jquery-slider-bar.js"))};c.fn.sliderBar=function(f){e();var g=new a(f);$wraper=g.create(this);g.bindListener($wraper)};c.fn.onchange=function(f){c(this).bind("DOMNodeInserted",f)}})(jQuery);